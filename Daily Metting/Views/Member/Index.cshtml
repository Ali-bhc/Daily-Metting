@model HomeViewModel
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<div id="counter">
    <div class="timer">
        <h1>Meeting Timer</h1>
        <span id="timer"></span>
        <div>
            <!-- Call to actions -->
            <ul class="list-inline">
                <li class="list-inline-item pt-2">
                    <button id="reset-btn" type="button" class="btn btn-demo"><i class="glyphicon glyphicon-repeat"></i>Reset</button>
                </li>
                <li class="list-inline-item pt-2">
                    <button id="pause-btn" type="button" class="btn btn-demo"><i class="glyphicon glyphicon-repeat"></i>Pause</button>
                </li>
                <li class="list-inline-item pt-2">
                    <button id="start-btn" type="button" class="btn btn-demo"><i class="glyphicon glyphicon-repeat"></i>Start</button>
                </li>
            </ul>

        </div>
    </div>
</div>
<form method="post" asp-controller="Member" asp-action="GeneratePDF">
    <div id="fixed-div">

        <!-- Page Heading -->
        <div class="d-sm-flex align-items-center justify-content-between mb-4">
            
            <input type="hidden" name="ExportData" id="ExportData" />
            <input type="hidden" name="pdfDate" id="pdfDate" value="" />
            <input type="submit" id="btnSubmit" value="Generate Report" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" />
        </div>

        <!--Escallations and Notes-->
        <div class="form-group">
            <textarea name="Escalation" class="form-control" id="escalation" placeholder="Escalation"></textarea>
            <span name="Escalation" class="text-danger"></span>
        </div>
        <div class="form-group">
            <textarea name="Escallation-comment" class="form-control" id="escalation-comment" placeholder="Comments"></textarea>
            <span name="Escallation-comment" class="text-danger"></span>
        </div>

    </div>
</form>

<div class="container table-container">
    <div id="MyTable"><table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Points</th>
                    <th>Values</th>
                    <th colspan="4">Description</th>
                    <th colspan="3">Comment</th>
                </tr>
            </thead>

            @foreach (var cat in Model.pointCategoryList.Keys)
            {
                <tbody id="TableTest">

                    @if (Model.pointCategoryList[cat].Count() > 0)
                    {
                        <tr>
                            <td id="@cat" class="text-center" colspan="11"><img style="width:30px;" src="~/img/Icons/@cat Icon.svg" id="Icon">@cat</td>
                        </tr>
                        @foreach (var point in Model.pointCategoryList[cat])
                        {
                            
                            <tr>
                                <td rowspan=1>@point.Point_Name</td>
                                <td rowspan=1>@Model.ListOfSumOfValuesOfPoints[point.Point_Name]</td>
                                <td colspan=4>@Html.Raw(Model.DescriptionssConcatenation[point.Point_Name].ElementAt(0).Replace("\n", "<br />"))</td>
                                <td colspan=3>@Html.Raw(Model.CommentsConcatenation[point.Point_Name].ElementAt(0).Replace("\n", "<br />"))</td>
                            </tr>


                        }

                    }
                </tbody>
                @if (Model.ListofAttainementAverages != null && cat == "Delivery")
                {
                    <tbody id="AttainementTable">
                        <tr class="thead-dark">
                            <th colspan="11" class="text-center">Attainement</th>
                        </tr>
                         <tr>
                            <td  class="text-center">APU</td>
                            <td>Project Name</td>
                            <td>Attainements OTIF</td>
                            <td>Attainements MIX</td>
                            <td>Productivity</td>
                            <td>Downtime</td>
                            <td>Scrap</td>
                            <td colspan="3">Comments</td>
                        </tr>
                        @foreach (var apu in Model.ListofAttainementAverages.Keys)
                        {
                                
                                <tr>
                                    <td class="align-middle text-center border-bottom-dark" rowspan=@Model.ListofAttainementAverages[apu].Count()>@apu</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(0).Project_name</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(0).Attainement_OTIF %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(0).Attainement_Mix %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(0).Productivity %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(0).Downtime %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(0).Scrap %</td>
                                    <td colspan="3" class="small">@Html.Raw(Model.ListofAttainementAverages[apu].ElementAt(0).Comment.Replace("\n", "<br />"))</td>
                                </tr>
                                @for (int i = 1 ; i < Model.ListofAttainementAverages[apu].Count(); i++ )
                                {
                                <tr>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(i).Project_name</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(i).Attainement_OTIF %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(i).Attainement_Mix %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(i).Productivity %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(i).Downtime %</td>
                                    <td>@Model.ListofAttainementAverages[apu].ElementAt(i).Scrap %</td>
                                    <td colspan="3" class="small">@Html.Raw(Model.ListofAttainementAverages[apu].ElementAt(i).Comment.Replace("\n", "<br />"))</td>
                                </tr>
                                }


                                @*@foreach (var attainement in Model.ListofAttainementAverages[apu])
                                {
                                if ()
                                    <tr>
                                        <td>@attainement.Project_name</td>
                                        <td>@attainement.Attainement_OTIF %</td>
                                        <td>@attainement.Attainement_Mix %</td>
                                        <td>@attainement.Productivity %</td>
                                        <td>@attainement.Downtime %</td>
                                        <td>@attainement.Scrap %</td>
                                        <td class="small">@Html.Raw(attainement.Comment.Replace("\n", "<br />"))</td>
                                    </tr>
                                }*@

                        }

                 

                    </tbody>
                }


            }

        </table>

    </div>
</div>

